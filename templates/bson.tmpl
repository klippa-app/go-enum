// Code generated by go-enum, DO NOT EDIT.
package {{ $.Pkg }}

{{- $t := $.EnumName }}
{{- $lt := receiver $t }}
{{- $FromString := print (pascal ( $t )) "FromString"}}

import (
	"github.com/globalsign/mgo/bson"

	mongo "go.mongodb.org/mongo-driver/bson"
	"go.mongodb.org/mongo-driver/bson/bsontype"
)

func ({{ $lt }} {{ $t }}) GetBSON() (interface{}, error) {
	err := {{ $lt }}.Validate() 
	if err != nil {
		return nil, err
	}

	return {{ $lt }}.String(), nil
}

func ({{ $lt }} *{{ $t }}) SetBSON(raw bson.Raw) error {
	var str string
	
	err := raw.Unmarshal(&str)
	if err != nil {
		return err
	}

	enum, err := {{ $FromString }}(str)
	if err != nil {
		return err
	}

	*{{ $lt }} = *enum
	return nil
}

func ({{ $lt }} *{{ $t }}) UnmarshalBSON(data []byte) error {
	return {{ $lt }}.SetBSON(bson.Raw{
		Kind: bson.ElementString,
		Data: data,
	})
}

func ({{ $lt }} {{ $t }}) MarshalBSONValue() (bsontype.Type, []byte, error) {
	err := {{ $lt }}.Validate()
	if err != nil {
		return bsontype.Undefined,nil, err
	}

	return mongo.MarshalValue({{ $lt }}.String())
}
